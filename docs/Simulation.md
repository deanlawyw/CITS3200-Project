# Simulation
This document outlines the inner-workings of the simulation
that participants interact with. The simulation for each
participant is performed in three parts:

1) The initial follower number and credibility of each source is
   sampled from the default normal distributions specified
   in the configuration spreadsheet.
2) All the source/post pairs that will be shown to participants
   are pre-generated by running a simulation. Therefore, the
   interactions of participants with posts have no impact on
   the source/post pairs that they will be shown.
3) The participant's followers and credibility are updated as
   they react to posts. The changes to their followers and
   credibility is dependent upon the reactions they choose,
   and may be configured for each post.

## ðŸ“Š Source's Credibility and Followers Change
Throughout the game, the credibility and followers of the
sources will change. The change to the credibility and
followers of the sources is the same change that is
applied to participants after they share a post. This
change is applied after the source/post pair is shown to
the participant. This is done to increase immersion by
showing that the credibility and followers of the sources
also change. However, it also means that if one source
is selected to show many true or many false posts, their
credibility may rise to 100 or fall to zero.

## ðŸ§® Source/Post Pair Selection
The source/post pair selection dictates what posts participants
will be shown, when, and from which source. All the source/post pairs
are pre-generated when a participant starts the study. The participant's
interactions with the posts have no impact on the subsequent
sources and posts that will be shown to them.

The game can be configured such that some sources can be associated with 
many posts, however each post will only ever be shown once to a participant.

### Source Selection
The source to be shown is always chosen first for all
source/post selection methods other than **Pre-Defined**.
Sources are chosen randomly, and their choice is weighted
by their maximum number of posts. Therefore, if a source
has a maximum of 10 posts, it will be 10x as likely to be
chosen as a source that has a maximum of 1 post. Sources
that have no maximum number of posts will be weighted with
the mean max-post number of all sources that have a maximum. 
Once the maximum number of posts has been reached for a given
source, it will not be chosen again.


### Method 1: Overall-Ratio
When using the **Overall-Ratio** source/post selection method,
posts will be chosen to target an overall percentage of true 
and false posts to be shown to the user. For example,
if you use an overall true-post percentage of 60%, then it
will attempt to sample 60% true posts, and 40% false posts.
This is achieved by randomly selecting whether to show a true
or a false post based upon the true-post percentage. [hm, if you are sampling based on the true-post percentage, you are not sampling randomly, but probabilistically, right] Therefore, it is technically possible that a participant 
is shown many false posts even if the true-post percentage is 
high due to random chance. [I don't understand this - what do you mean by "many posts"? Do you mean that sampling is probabilistic, i.e. that if you only show 10 posts, you may end up with 7 false posts and 3 true posts, whereas it will better approximate the target levels with larger samples? Or does it work such that if you sample 10 posts, if it were by chance to select 4 false posts initially (i.e. when you hit the quota), it would then sample 6 true ones (assuming there is a sufficient number of true posts available). Please clarify.]

However, if there are no remaining true posts, or no remaining
false posts, then the selection method will have to choose
from whatever posts are remaining. For example, if your study
has a length of 10 and includes 20 false posts but only
5 true posts, it is not possible that the game could ever
show more than 50% true posts to the participant. Every time
it has shown 5 true posts to the participant, it will only
be able to show false posts from then on.

### Method 2: Source-Ratios
When using the **Source-Ratios** source/post selection method,
each source must be given their own true-post percentage. The
post selection then acts in the exact same way as when using
the **Overall-Ratio** selection method, except that the true-post 
percentage is source-specific.

### Method 3: Credibility
When using the **Credibility** source/post selection method,
the true-post percentage to use for selecting posts is
determined by a configurable linear relationship with
the credibility of the source. Once the true-post percentage
is calculated from the credibility of the source, it is then
used in the same way as the **Overall-Ratio** selection method
to choose the posts.

Care must be taken when using the credibility source/post
selection method, as a source's credibility can decrease to 0 
or increase to 100 over the course of a game, if a source is 
used to show many false / true posts. This may be accelerated 
under **Credibility** selection due to a feedback cycle where 
a high credibility causes a source to show more true
posts, which increases credibility. Adjusting the relationship 
between credibility and true-post percentage to be flatter can
help alleviate this issue.

### Method 4: Pre-Defined
The **Pre-Defined** source/post selection method allows
specification of an exact order of sources and posts to
be shown to participants. Every participant is always
shown the exact same set of source/post pairs that is
pre-defined in the configuration spreadsheet. [good to have this spelled out. One feature that would be important to add (not necessarily now but at some point) is to have a specified set of source/post pairs but presented in a random order.]
